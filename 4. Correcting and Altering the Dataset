## After discussing with a colleague, updated code to use stringr str_extract() and regex
## For more on regex construction: https://regex101.com/

## WORKING ATTEMPT - str_extract()
library(stringr) ## Load stringr

## Create field "institution"
HXMITX$institution <- str_extract(HXMITX$course_id,"^\\w+(?=/)") ## Returns all before first /

## Create field "course"
HXMITX$course <- str_extract(HXMITX$course_id,"(?<=/)\\w+(?=/)") ## Returns all between first and second /

## Create field "year_term"
HXMITX$year_term <- str_extract(HXMITX$course_id,"(?<=/)\\w+$") ## Returns all after second /

## Create field "year"
HXMITX$year <- str_extract(HXMITX$course_id,"(?<=/)\\d+") ## Returns all after second / and before _

## Create field "term"
HXMITX$term <- str_extract(HXMITX$course_id,"(?<=/\\d{4}_)\\w+$") ## Retuns all after _

## Drop test and created fields
#HXMITX$institution <- NULL
#HXMITX$course <- NULL
#HXMITX$year_term <- NULL
#HXMITX$year <- NULL
#HXMITX$term <- NULL
#HXMITX$HarvardX <- NULL
#HXMITX$MITx <- NULL
#HXMITX$harvardx <- NULL
#HXMITX$mitx <- NULL



## EXPLORATION

## Gets every instance of HarvardX or MITx and prints it
str_extract_all(HXMITX$course_id, 'HarvardX')
str_extract_all(HXMITX$course_id, 'MITx')

## Sets True/False for each case where it matches/does not match HarvardX or MITx
str_detect(HXMITX$course_id, 'HarvardX')
str_detect(HXMITX$course_id, 'MITx')

## Create a 'HarvardX' field
HXMITX$harvardx <- str_extract_all(HXMITX$course_id, 'HarvardX')
View(HXMITX)

## Create a 'MITx' field
HXMITX$mitx <- str_extract_all(HXMITX$course_id, 'MITx')
View(HXMITX)
